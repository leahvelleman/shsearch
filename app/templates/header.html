<div class="well">
    <h1 class="display-4">
        <a href="index.html"><span class="text-muted">Sacred Harp</span> Search</a>
    </h1>
    <form action="/search" method="get" name="search">
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <input type="submit" class="btn btn-primary" value="Search">
            </div>
            <input type="text" id="song_text" name="song_text"
                                              class="form-control"
                                              value="{{args['song_text']}}">
        </div>
        {% if args %}
        <div class="input-group mb-3">
            {% for k in args %}
                {% if k != "song_text" %}
                    {% for v in args.getlist(k) %}
                        <button onclick="this.remove(); submit()" 
                            class="badge badge-secondary border border-secondary
                            btn-light mr-1">
                            <input type="hidden" 
                                   id="{{k}}"
                                   name="{{k}}" 
                                   value="{{v}}" 
                                   readonly>
                            {{v}} &times;
                        </button>
                    {% endfor %}
                {% endif %}
            {% endfor %}
        </div>
        {% endif %}
    </form>
</div>

{% with messages = get_flashed_messages() %}
{% if messages %}
<div class="well">
{% for message in messages %}
    <div class="controls">
        <span class="help-inline">{{ message }}</span>
    </div>
{% endfor %}
</div>
{% endif %}
{% endwith %}

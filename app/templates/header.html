<div class="well">
    <h1 class="display-4">
        <a href="index.html"><span class="text-muted">Sacred Harp</span> Search</a>
    </h1>
    <form action="/search" method="get" name="search">
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <input type="submit" class="btn btn-primary" value="Search">
            </div>
            <input type="text" id="q" name="q"
                                              class="form-control"
                                              value="{{query}}">
        </div>
        {% if filters %}
        <div class="input-group mb-3">
            {{ filters }}
            {{ query }}
            {% for f in filters %}
                {% for v in filters[f] %}
                    <button onclick="this.remove(); submit()" 
                        class="badge badge-secondary border border-secondary
                        btn-light mr-1">
                        <input type="hidden" 
                               id="{{f}}"
                               name="{{f}}" 
                               value="{{v}}" 
                               readonly>
                        {{v}} &times;
                    </button>
                {% endfor %}
            {% endfor %}
        </div>
        {% endif %}
    </form>
</div>

{% with messages = get_flashed_messages() %}
{% if messages %}
<div class="well">
{% for message in messages %}
    <div class="controls">
        <span class="help-inline">{{ message }}</span>
    </div>
{% endfor %}
</div>
{% endif %}
{% endwith %}
